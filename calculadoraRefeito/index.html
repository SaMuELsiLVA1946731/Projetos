<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">

    <style>
        .calculadora {
            margin-top: 40px;
            border: solid 1px #000;
            padding: 10px 10px;
            background-color: #2e2e2e;
            border-radius: 10px;
            box-shadow: 1px 1px 5px #000;
            max-width: 280px;

        }

        .btn {
            width: 60px;
            height: 50px;
            margin: 5px;
            box-shadow: 1px 1px 1px #000;
        }

        .btn-valor {
            width: 60px;
            height: 50px;
            margin: 5px;
            box-shadow: 1px 1px 1px #000;
            font-size: 15px;
            padding: 1px;
        }

        .clear {

            width: 130px;
        }

        .enter {

            height: 110px;
        }

        .zero {
            width: 130px;
        }

        .imc {
            height: 50px;
        }

        .Cimc {
            height: 60px;
            width: 76px;

        }

        .resultado {
            text-align: right;
            font-size: 20px;
            margin-top: 10px;
            margin-bottom: 20px;
            border: solid 1px #000;
            box-shadow: 1px 1px 1px #000;
            width: 100%;
        }


        .parOu {
            height: 100px;
            width: 100px;

        }



        .aniversario {

            font-size: 14px;
            padding: 1px;
            width: 100px;
            height: 70px;
        }
    </style>
</head>

<body style="background-color: #d9d9d9;">
    <div class="container">
        <div class="row">
            <div class="col d-flex justify-content-center">
                <br>
                <div class="calculadora">
                    <div class="ml-1">
                    <input id="resultado" type="text" class="form-control resultado" placeholder="0"
                        disabled="disabled">
                    
                        <div class="row">
                            <button onclick="calcular('acao' , 'c')" type="button"
                                class="btn btn-dark btn-lg clear font-weight-light">C</button>
                            <button onclick="calcular('acao', '/')" type="button"
                                class="btn btn-dark btn-lg font-weight-light">/</button>
                            <button onclick="calcular('acao', '*')" type="button"
                                class="btn btn-dark btn-lg font-weight-light">X</button>
                        </div>
                        <div class="row">
                            <button onclick="calcular('valor' , 7)" type="button"
                                class="btn btn-dark btn-lg font-weight-light">7</button>
                            <button onclick="calcular('valor', 8)" type="button"
                                class="btn btn-dark btn-lg font-weight-light">8</button>
                            <button onclick="calcular('valor', 9)" type="button"
                                class="btn btn-dark btn-lg font-weight-light">9</button>
                            <button onclick="calcular('acao', '-')" type="button"
                                class="btn btn-dark btn-lg font-weight-light">-</button>
                        </div>
                        <div class="row">
                            <button onclick="calcular('valor' , 4)" type="button"
                                class="btn btn-dark btn-lg  font-weight-light">4</button>
                            <button onclick="calcular('valor', 5)" type="button"
                                class="btn btn-dark btn-lg font-weight-light">5</button>
                            <button onclick="calcular('valor', 6)" type="button"
                                class="btn btn-dark btn-lg font-weight-light">6</button>
                            <button onclick="calcular('acao', '+')" type="button"
                                class="btn btn-dark btn-lg font-weight-light">+</button>
                        </div>
                        <div class="row">
                            <button onclick="calcular('valor' , 1)" type="button"
                                class="btn btn-dark btn-lg font-weight-light">1</button>
                            <button onclick="calcular('valor', 2)" type="button"
                                class="btn btn-dark btn-lg font-weight-light">2</button>
                            <button onclick="calcular('valor', 3)" type="button"
                                class="btn btn-dark btn-lg font-weight-light">3</button>
                            <button onclick="calcular('acao', '=')" type="button"
                                class="btn btn-dark btn-lg enter">=</button>
                        </div>

                        <div class="row" style="margin-top: -60px;">
                            <button onclick="calcular('valor', 0)" type="button"
                                class="btn btn-dark zero btn-lg font-weight-light">0</button>
                            <button onclick="calcular('acao', '.')" type="button"
                                class="btn btn-dark btn-lg font-weight-light">.</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="">
                            <button onclick="calcular('acao', 'altura')" type="button" style="width: 90%"
                                class="btn btn-dark altura  imc font-weight-light" id="altura">Altura <br> <span>Ex
                                    1.45</span> </button>
                            <br>
                            <button onclick="calcular('acao', 'peso')" type="button" style="width: 90%"
                                class="btn btn-dark  imc font-weight-light" id="peso">Peso <br> <span>Ex 90</span>
                            </button>
                            <br>
                            <button onclick="calcular('acao', 'Calimc' )" type="button"
                                class="btn btn-dark  Cimc font-weight-light" id="Cimc">Calcular IMC</button>
                        </div>
                        <div class="">
                            <button onclick="calcular('acao', 'ParOu')" type="button"
                                class="btn btn-dark btn-lg parOu font-weight-light" id="ParOu">PAR OU
                                IMPAR?</button>
                            <br>
                            <button onclick="calcular('acao', 'aniverario')" type="button"
                                class="btn btn-dark btn-lg aniversario font-weight-light" id="aniverario">Data de
                                nascimento(/) e Clique</button>
                            <br>
                        </div>
                        <div class="text-align-center">
                            <button onclick="calcular('acao', 'numero1')" type="button" style="width: 79px;"
                                class=" btn-valor btn btn-dark  font-weight-light" id="numero1">Valor Atual</button>
                            <br>
                            <button onclick="calcular('acao', 'numero2')" type="button" style="width: 79px;"
                                class=" btn-valor btn btn-dark  font-weight-light" id="numero2">Valor Alvo</button>
                            <br>
                            <button onclick="calcular('acao', 'restante' )" type="button"
                                style="width: 79px; height: 60px;" class="btn btn-dark restante  font-weight-light"
                                id="restante">Calcular diferença</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    </div>

    <script>

        var peso = document.getElementById('resultado').value = "";
        var altura = document.getElementById('resultado').value = "";
        var situacao = "";
        var numero1 = (document.getElementById('numero1').value = "");
        var numero2 = (document.getElementById('numero2').value = "");


        function calcular(tipo, valor) {

            if (tipo === 'acao') {

                if (valor === 'c') {

                    //limpar o visor (id resultado)
                    document.getElementById('resultado').value = ""
                }

                if (valor === '+' || valor === '-' || valor === '*' || valor === '/' || valor === '.') {

                    document.getElementById('resultado').value += valor

                }

                if (valor === '=') {

                    var valor_campo = eval(document.getElementById('resultado').value);
                    console.log(eval(valor_campo));

                    document.getElementById('resultado').value = valor_campo;

                }

                if (valor === "peso") {

                    peso = parseInt(document.getElementById('resultado').value);
                    document.getElementById('resultado').value = "";


                }
                if (valor === "altura") {

                    altura = parseFloat(document.getElementById('resultado').value);
                    document.getElementById('resultado').value = "";


                }


                if (valor === "Calimc") {

                    if (peso === NaN || peso === "") {
                        document.getElementById('resultado').value += "E o peso?";
                    }
                    if (altura === NaN || altura === "") {
                        document.getElementById('resultado').value += "E a altura?";
                    }

                    imc = (peso / Math.pow(altura, 2)).toFixed(1);

                    if (imc < 18.5) {
                        situacao = "abaixo do peso";
                    } else if (imc > 18.5 && imc < 25.0) {
                        situacao = "Peso ideal";
                    } else if (imc > 25.0 && imc < 29.9) {
                        situacao = "Levemente acima do peso";
                    } else if (imc > 29.9 && imc < 34.9) {
                        situacao = "Obesidade grau 1";
                    } else if (imc > 34.9 && imc < 39.9) {
                        situacao = "Obesidade grau 2 (severa)";
                    } else if (imc > 39.9) {
                        situacao = "Obsidade 3 (mórbida)";

                    }

                    if (situacao != "") {
                        document.getElementById('resultado').value = `${situacao}`;
                    } else {
                        document.getElementById('resultado').value = `Peso e altura invalidos`;
                    }

                }


                if (valor === 'ParOu') {

                    Par = "Par";
                    Impar = "Impar";
                    numero = parseInt(document.getElementById('resultado').value);

                    if (numero % 2 === 0) {

                        document.getElementById('resultado').value = `${numero} é par`;

                    }
                    else if (Number.isNaN(numero)) {
                        numero = "";
                        document.getElementById('resultado').value = `Nenhum numero digitado`;
                    }

                    else {

                        document.getElementById('resultado').value = `${numero} é impar`;
                    }

                }

                if (valor === "numero1") {


                    numero1 = parseInt(document.getElementById('resultado').value);
                    document.getElementById('resultado').value = "";

                }
                if (valor === "numero2") {

                    numero2 = parseInt(document.getElementById('resultado').value);
                    document.getElementById('resultado').value = "";


                }
                if (valor === "restante") {


                    menos = numero2 - numero1;
                    PorceT = (menos / numero2);
                    document.getElementById('resultado').value = `${numero1} até ${numero2} falta ${(PorceT * 100).toFixed(0)}% `;


                }

                if (valor === "aniverario") {

                    // Exemplo de uso
                    /* 30/09/1999 */
                    var data = document.getElementById("resultado").value;
                    const dia = data.slice(0, 2);
                    const mes = data.slice(3, 5);
                    const ano = data.slice(6, 10);
                    const dataNascimento = new Date(ano, mes, dia);
                    var diasFaltaltes;

                    diasAteProximoAniversario(dataNascimento);

                    function diasAteProximoAniversario(dataNascimento) {

                        const hoje = new Date();
                        var DatAN = new Date(hoje.getFullYear(), dataNascimento.getMonth() - 1, dataNascimento.getDate());

                        console.log(DatAN);


                        if (hoje > DatAN) {

                            DatAN = new Date(DatAN.setFullYear(DatAN.getFullYear() + 1));
                        }

                        const diferençadeMiliAteData = (Math.abs(DatAN - hoje));
                        const diasAteNiver = diferençadeMiliAteData / (1000 * 60 * 60 * 24);

                        console.log(diasAteNiver);
                        diasFaltantes = Math.ceil(diasAteNiver);

                    }


                    if (data == "") {
                        document.getElementById("resultado").value = "Data não digitada"
                    } else {
                        document.getElementById("resultado").value = `Proximo falta ${diasFaltantes} dias`;
                    }


                }

            }

            if (tipo === 'valor') {

                document.getElementById('resultado').value += valor;


            }


        }

    </script>
</body>

</html>